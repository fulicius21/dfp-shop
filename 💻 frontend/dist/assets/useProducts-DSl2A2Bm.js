var F=Object.defineProperty,O=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var m=(r,e,t)=>e in r?F(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g=(r,e)=>{for(var t in e||(e={}))T.call(e,t)&&m(r,t,e[t]);if(L)for(var t of L(e))E.call(e,t)&&m(r,t,e[t]);return r},b=(r,e)=>O(r,$(e));var C=(r,e,t)=>m(r,typeof e!="symbol"?e+"":e,t);var s=(r,e,t)=>new Promise((a,o)=>{var l=u=>{try{n(t.next(u))}catch(S){o(S)}},c=u=>{try{n(t.throw(u))}catch(S){o(S)}},n=u=>u.done?a(u.value):Promise.resolve(u.value).then(l,c);n((t=t.apply(r,e)).next())});import{e as I}from"./index-Du4_7OI5.js";import{u as f}from"./query-BW2QfU5q.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=I("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),j="http://localhost:3001/api";class U{constructor(e){C(this,"baseURL");this.baseURL=e}request(a){return s(this,arguments,function*(e,t={}){const o=`${this.baseURL}${e}`,l=g({headers:g({"Content-Type":"application/json"},t.headers)},t);try{console.log(`API Request: ${t.method||"GET"} ${o}`);const c=yield fetch(o,l);if(!c.ok){const u=yield c.text();throw new Error(`HTTP ${c.status}: ${u}`)}const n=yield c.json();return console.log(`API Response: ${o}`,n),n}catch(c){throw console.error(`API Error: ${o}`,c),c}})}getProducts(e){return s(this,null,function*(){const t=new URLSearchParams;e&&Object.entries(e).forEach(([l,c])=>{c!=null&&(Array.isArray(c)?c.forEach(n=>t.append(l,n.toString())):t.append(l,c.toString()))});const a=t.toString(),o=`/products${a?`?${a}`:""}`;return this.request(o)})}getProduct(e){return s(this,null,function*(){return this.request(`/products/${e}`)})}getFeaturedProducts(){return s(this,null,function*(){return this.request("/products/featured")})}getNewArrivals(){return s(this,null,function*(){return this.request("/products/new-arrivals")})}getBestsellers(){return s(this,null,function*(){return this.request("/products/bestsellers")})}getCategories(){return s(this,null,function*(){return this.request("/categories")})}getCategory(e){return s(this,null,function*(){return this.request(`/categories/${e}`)})}getCategoryProducts(e,t){return s(this,null,function*(){const a=new URLSearchParams;t&&Object.entries(t).forEach(([c,n])=>{n!=null&&(Array.isArray(n)?n.forEach(u=>a.append(c,u.toString())):a.append(c,n.toString()))});const o=a.toString(),l=`/categories/${e}/products${o?`?${o}`:""}`;return this.request(l)})}getCollections(){return s(this,null,function*(){return this.request("/collections")})}getCollection(e){return s(this,null,function*(){return this.request(`/collections/${e}`)})}getCollectionProducts(e,t){return s(this,null,function*(){const a=new URLSearchParams;t&&Object.entries(t).forEach(([c,n])=>{n!=null&&(Array.isArray(n)?n.forEach(u=>a.append(c,u.toString())):a.append(c,n.toString()))});const o=a.toString(),l=`/collections/${e}/products${o?`?${o}`:""}`;return this.request(l)})}searchProducts(e,t){return s(this,null,function*(){const a=new URLSearchParams;a.append("search",e),t&&Object.entries(t).forEach(([c,n])=>{n!=null&&c!=="search"&&(Array.isArray(n)?n.forEach(u=>a.append(c,u.toString())):a.append(c,n.toString()))});const l=`/products/search?${a.toString()}`;return this.request(l)})}healthCheck(){return s(this,null,function*(){try{return yield(yield fetch(`${this.baseURL}/health`)).json()}catch(e){throw console.error("Health check failed:",e),e}})}}const d=new U(j),{getProducts:v,getProduct:H,getFeaturedProducts:K,getNewArrivals:z,getBestsellers:G,getCategories:Q,getCategory:Y,getCategoryProducts:J,getCollections:V,getCollection:X,getCollectionProducts:Z,searchProducts:ee,healthCheck:te}=d;let i=null,y=null,P=null;function h(r){return s(this,null,function*(){try{const e=yield fetch(`/data/${r}`);if(!e.ok)throw new Error(`Failed to load ${r}: ${e.statusText}`);return yield e.json()}catch(e){return console.error(`Error loading ${r}:`,e),[]}})}class R{getProducts(){return s(this,null,function*(){return i||(i=yield h("products.json")),{success:!0,data:i,message:"Produkte erfolgreich geladen (statisch)"}})}getProduct(e){return s(this,null,function*(){i||(i=yield h("products.json"));const t=i.find(a=>a.id===e);return t?{success:!0,data:t,message:"Produkt erfolgreich geladen"}:{success:!1,data:null,message:"Produkt nicht gefunden",error:"PRODUCT_NOT_FOUND"}})}getFeaturedProducts(){return s(this,null,function*(){return i||(i=yield h("products.json")),{success:!0,data:i.filter(t=>t.featured),message:"Featured Produkte erfolgreich geladen"}})}getNewArrivals(){return s(this,null,function*(){return i||(i=yield h("products.json")),{success:!0,data:i.filter(t=>t.newArrival),message:"Neue Arrivals erfolgreich geladen"}})}getBestsellers(){return s(this,null,function*(){return i||(i=yield h("products.json")),{success:!0,data:i.filter(t=>t.bestseller),message:"Bestseller erfolgreich geladen"}})}getProductsByCategory(e){return s(this,null,function*(){return i||(i=yield h("products.json")),{success:!0,data:i.filter(a=>a.category.toLowerCase()===e.toLowerCase()),message:`Produkte f√ºr Kategorie ${e} erfolgreich geladen`}})}getProductsByCollection(e){return s(this,null,function*(){return i||(i=yield h("products.json")),{success:!0,data:i.filter(a=>a.collection.toLowerCase().includes(e.toLowerCase())),message:`Produkte f√ºr Kollektion ${e} erfolgreich geladen`}})}getCategories(){return s(this,null,function*(){return y||(y=yield h("categories.json")),{success:!0,data:y,message:"Kategorien erfolgreich geladen"}})}getCategory(e){return s(this,null,function*(){y||(y=yield h("categories.json"));const t=y.find(a=>a.slug===e);return t?{success:!0,data:t,message:"Kategorie erfolgreich geladen"}:{success:!1,data:null,message:"Kategorie nicht gefunden",error:"CATEGORY_NOT_FOUND"}})}getCollections(){return s(this,null,function*(){return P||(P=yield h("collections.json")),{success:!0,data:P,message:"Kollektionen erfolgreich geladen"}})}getCollection(e){return s(this,null,function*(){P||(P=yield h("collections.json"));const t=P.find(a=>a.slug===e);return t?{success:!0,data:t,message:"Kollektion erfolgreich geladen"}:{success:!1,data:null,message:"Kollektion nicht gefunden",error:"COLLECTION_NOT_FOUND"}})}searchProducts(e){return s(this,null,function*(){i||(i=yield h("products.json"));const t=e.toLowerCase(),a=i.filter(o=>o.name.toLowerCase().includes(t)||o.description.toLowerCase().includes(t)||o.category.toLowerCase().includes(t)||o.collection.toLowerCase().includes(t)||o.tags.some(l=>l.toLowerCase().includes(t)));return{success:!0,data:a,message:`${a.length} Suchergebnisse f√ºr "${e}"`}})}warmCache(){return s(this,null,function*(){console.log("üî• Warming static data cache..."),yield Promise.all([this.getProducts(),this.getCategories(),this.getCollections()]),console.log("‚úÖ Static data cache warmed")})}clearCache(){i=null,y=null,P=null,console.log("üóëÔ∏è Static data cache cleared")}}const A=new R;A.warmCache();class D{constructor(){C(this,"staticClient");C(this,"useStaticMode",!1);C(this,"healthCheckInProgress",!1);C(this,"lastHealthCheck",0);C(this,"healthCheckInterval",3e4);this.staticClient=A,this.performHealthCheck()}performHealthCheck(){return s(this,null,function*(){if(this.healthCheckInProgress)return!this.useStaticMode;const e=Date.now();if(e-this.lastHealthCheck<this.healthCheckInterval)return!this.useStaticMode;this.healthCheckInProgress=!0,this.lastHealthCheck=e;try{if((yield Promise.race([d.getCategories(),new Promise((a,o)=>setTimeout(()=>o(new Error("Timeout")),3e3))])).success)return this.useStaticMode=!1,console.log("‚úÖ Backend-API verf√ºgbar - verwende Live-Daten"),!0;throw new Error("API response not successful")}catch(t){return this.useStaticMode=!0,console.log("‚ö†Ô∏è Backend-API nicht verf√ºgbar - wechsle zu statischen Daten"),!1}finally{this.healthCheckInProgress=!1}})}executeWithFallback(e,t,a){return s(this,null,function*(){if(this.useStaticMode)return console.log(`üì± ${a} - verwende statische Daten`),t();try{const o=yield Promise.race([e(),new Promise((l,c)=>setTimeout(()=>c(new Error("API Timeout")),5e3))]);if(o.success)return console.log(`üåê ${a} - erfolgreich via Backend-API`),o;throw new Error("API call failed")}catch(o){return console.log(`üîÑ ${a} - Fallback zu statischen Daten`),this.useStaticMode=!0,t()}})}getProducts(){return s(this,null,function*(){return this.executeWithFallback(()=>d.getProducts(),()=>this.staticClient.getProducts(),"getProducts")})}getProduct(e){return s(this,null,function*(){return this.executeWithFallback(()=>d.getProduct(e),()=>this.staticClient.getProduct(e),`getProduct(${e})`)})}getFeaturedProducts(){return s(this,null,function*(){return this.executeWithFallback(()=>d.getFeaturedProducts(),()=>this.staticClient.getFeaturedProducts(),"getFeaturedProducts")})}getNewArrivals(){return s(this,null,function*(){return this.executeWithFallback(()=>d.getNewArrivals(),()=>this.staticClient.getNewArrivals(),"getNewArrivals")})}getBestsellers(){return s(this,null,function*(){return this.executeWithFallback(()=>d.getBestsellers(),()=>this.staticClient.getBestsellers(),"getBestsellers")})}getCategories(){return s(this,null,function*(){return this.executeWithFallback(()=>d.getCategories(),()=>this.staticClient.getCategories(),"getCategories")})}getCategory(e){return s(this,null,function*(){return this.executeWithFallback(()=>d.getCategory(e),()=>this.staticClient.getCategory(e),`getCategory(${e})`)})}getCollections(){return s(this,null,function*(){return this.executeWithFallback(()=>d.getCollections(),()=>this.staticClient.getCollections(),"getCollections")})}getCollection(e){return s(this,null,function*(){return this.executeWithFallback(()=>d.getCollection(e),()=>this.staticClient.getCollection(e),`getCollection(${e})`)})}getProductsByCategory(e){return s(this,null,function*(){return this.executeWithFallback(()=>d.getCategoryProducts(e),()=>this.staticClient.getProductsByCategory(e),`getProductsByCategory(${e})`)})}getProductsByCollection(e){return s(this,null,function*(){return this.executeWithFallback(()=>d.getProducts({collection:[e]}),()=>this.staticClient.getProductsByCollection(e),`getProductsByCollection(${e})`)})}searchProducts(e){return s(this,null,function*(){return this.executeWithFallback(()=>d.getProducts({search:e}),()=>this.staticClient.searchProducts(e),`searchProducts(${e})`)})}isUsingStaticMode(){return this.useStaticMode}forceStaticMode(e){this.useStaticMode=e,console.log(`üîß Statischer Modus ${e?"aktiviert":"deaktiviert"}`)}checkApiHealth(){return s(this,null,function*(){return this.performHealthCheck()})}getStatus(){return{useStaticMode:this.useStaticMode,lastHealthCheck:new Date(this.lastHealthCheck).toISOString(),healthCheckInProgress:this.healthCheckInProgress}}}const p=new D,w={PRODUCTS:"products",PRODUCT:"product",FEATURED_PRODUCTS:"featured-products",CATEGORIES:"categories",COLLECTIONS:"collections",COLLECTION:"collection",COLLECTION_PRODUCTS:"collection-products"},k={staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1};function B(r){return f([w.PRODUCTS,r],()=>s(this,null,function*(){return(yield p.getProducts()).data}),b(g({},k),{enabled:!0}))}function se(r){return f([w.PRODUCT,r],()=>s(this,null,function*(){return(yield p.getProduct(r)).data}),b(g({},k),{enabled:!!r}))}function re(){return f([w.FEATURED_PRODUCTS],()=>s(this,null,function*(){return(yield p.getFeaturedProducts()).data}),g({},k))}function M(){return f([w.CATEGORIES],()=>s(this,null,function*(){return(yield p.getCategories()).data}),g({},k))}function W(){return f([w.COLLECTIONS],()=>s(this,null,function*(){return(yield p.getCollections()).data}),g({},k))}function ae(r){return f([w.COLLECTION,r],()=>s(this,null,function*(){return(yield p.getCollection(r)).data}),b(g({},k),{enabled:!!r}))}function oe(r,e){return f([w.COLLECTION_PRODUCTS,r,e],()=>s(this,null,function*(){return(yield p.getProductsByCollection(r)).data}),b(g({},k),{enabled:!!r}))}function ce(r){const{data:e,isLoading:t,error:a,refetch:o}=B(r),l=f(["fallback-products"],()=>s(this,null,function*(){return console.warn("API nicht verf√ºgbar, lade Fallback-Daten..."),yield(yield fetch("/data/products.json")).json()}),{enabled:!!a&&!t,staleTime:1/0});return{products:e||l.data||[],isLoading:t||l.isLoading,error:a&&l.error,isUsingFallback:!!a&&!!l.data,refetch:o}}function ne(){const{data:r,isLoading:e,error:t,refetch:a}=M(),o=f(["fallback-categories"],()=>s(this,null,function*(){return console.warn("API nicht verf√ºgbar, lade Fallback-Kategorien..."),yield(yield fetch("/data/categories.json")).json()}),{enabled:!!t&&!e,staleTime:1/0});return{categories:r||o.data||[],isLoading:e||o.isLoading,error:t&&o.error,isUsingFallback:!!t&&!!o.data,refetch:a}}function ie(){const{data:r,isLoading:e,error:t,refetch:a}=W(),o=f(["fallback-collections"],()=>s(this,null,function*(){return console.warn("API nicht verf√ºgbar, lade Fallback-Kollektionen..."),yield(yield fetch("/data/collections.json")).json()}),{enabled:!!t&&!e,staleTime:1/0});return{collections:r||o.data||[],isLoading:e||o.isLoading,error:t&&o.error,isUsingFallback:!!t&&!!o.data,refetch:a}}export{_ as W,ie as a,ce as b,ne as c,se as d,ae as e,oe as f,re as u};
